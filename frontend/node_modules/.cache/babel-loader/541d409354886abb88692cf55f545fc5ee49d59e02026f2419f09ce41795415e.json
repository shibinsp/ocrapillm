{"ast":null,"code":"var _jsxFileName = \"D:\\\\trae\\\\ocrapillm\\\\frontend\\\\src\\\\components\\\\ChatInterface.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useApp } from '../context/AppContext';\nimport { apiService } from '../services/api';\nimport { FiSend, FiTrash2, FiUser, FiMessageCircle, FiCopy, FiRefreshCw } from 'react-icons/fi';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatInterface = ({\n  isPanel = false\n}) => {\n  _s();\n  const {\n    state,\n    actions\n  } = useApp();\n  const {\n    currentDocument,\n    chatMessages,\n    isChatLoading\n  } = state;\n  const [message, setMessage] = useState('');\n  const [isTyping, setIsTyping] = useState(false);\n  const messagesEndRef = useRef(null);\n  const inputRef = useRef(null);\n\n  // Auto-scroll to bottom when new messages arrive\n  useEffect(() => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  }, [chatMessages]);\n\n  // Load chat history when document changes\n  useEffect(() => {\n    if (currentDocument) {\n      loadChatHistory();\n    }\n  }, [currentDocument]);\n  const loadChatHistory = async () => {\n    if (!currentDocument) return;\n    try {\n      // const history = await apiService.getChatHistory(currentDocument.id);\n      // actions.setChatMessages(history);\n\n      // For demo purposes, set empty chat\n      actions.setChatMessages([]);\n    } catch (error) {\n      console.error('Failed to load chat history:', error);\n    }\n  };\n  const handleSendMessage = async () => {\n    if (!message.trim() || !currentDocument || isChatLoading) return;\n    const userMessage = {\n      id: Date.now(),\n      type: 'user',\n      content: message.trim(),\n      timestamp: new Date().toISOString()\n    };\n\n    // Add user message\n    actions.addChatMessage(userMessage);\n    setMessage('');\n    actions.setChatLoading(true);\n    setIsTyping(true);\n    try {\n      // Simulate API call\n      await new Promise(resolve => setTimeout(resolve, 1500));\n\n      // For demo purposes, create a mock response\n      const aiResponse = {\n        id: Date.now() + 1,\n        type: 'ai',\n        content: generateMockResponse(userMessage.content),\n        timestamp: new Date().toISOString()\n      };\n\n      // In real implementation:\n      // const response = await apiService.chatWithDocument(\n      //   currentDocument.id,\n      //   message.trim(),\n      //   chatMessages\n      // );\n\n      actions.addChatMessage(aiResponse);\n    } catch (error) {\n      console.error('Chat error:', error);\n      const errorMessage = {\n        id: Date.now() + 1,\n        type: 'ai',\n        content: 'Sorry, I encountered an error while processing your question. Please try again.',\n        timestamp: new Date().toISOString(),\n        isError: true\n      };\n      actions.addChatMessage(errorMessage);\n      actions.showError('Failed to get AI response');\n    } finally {\n      actions.setChatLoading(false);\n      setIsTyping(false);\n    }\n  };\n  const generateMockResponse = userMessage => {\n    const responses = {\n      'summary': 'This document appears to be a lease agreement containing rental terms, property details, and legal clauses. The key information includes rental amount, lease duration, property address, and responsibilities of both tenant and landlord.',\n      'key points': 'The main points in this document include: 1) Monthly rent amount and payment terms, 2) Lease duration and renewal options, 3) Security deposit requirements, 4) Property maintenance responsibilities, 5) Termination clauses and notice periods.',\n      'rent': 'Based on the document, the monthly rent amount is specified in the lease terms section. The payment is typically due on the first of each month, with specific late fee policies outlined.',\n      'default': 'I can help you understand this document better. You can ask me about specific clauses, key terms, dates, amounts, or request a summary of the main points. What would you like to know?'\n    };\n    const lowerMessage = userMessage.toLowerCase();\n    if (lowerMessage.includes('summary') || lowerMessage.includes('summarize')) {\n      return responses.summary;\n    } else if (lowerMessage.includes('key') || lowerMessage.includes('main') || lowerMessage.includes('important')) {\n      return responses['key points'];\n    } else if (lowerMessage.includes('rent') || lowerMessage.includes('payment') || lowerMessage.includes('money')) {\n      return responses.rent;\n    } else {\n      return responses.default;\n    }\n  };\n  const handleKeyPress = event => {\n    if (event.key === 'Enter' && !event.shiftKey) {\n      event.preventDefault();\n      handleSendMessage();\n    }\n  };\n  const copyMessage = async content => {\n    try {\n      await navigator.clipboard.writeText(content);\n      actions.showSuccess('Message copied to clipboard');\n    } catch (error) {\n      actions.showError('Failed to copy message');\n    }\n  };\n  const clearChat = () => {\n    actions.clearChat();\n    actions.showInfo('Chat history cleared');\n  };\n  const formatTimestamp = timestamp => {\n    const date = new Date(timestamp);\n    return date.toLocaleTimeString([], {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n  if (!currentDocument) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"h-full flex items-center justify-center p-8\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-16 h-16 bg-secondary-100 dark:bg-secondary-700 rounded-full flex items-center justify-center mx-auto mb-4\",\n          children: /*#__PURE__*/_jsxDEV(FiMessageCircle, {\n            className: \"w-8 h-8 text-secondary-400\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold text-secondary-900 dark:text-white mb-2\",\n          children: \"AI Assistant Ready\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-secondary-600 dark:text-secondary-400 text-sm\",\n          children: \"Upload and process a document to start chatting with our AI assistant.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `h-full flex flex-col ${isPanel ? 'border-l border-secondary-200 dark:border-secondary-700' : ''}`,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 border-b border-secondary-200 dark:border-secondary-700 bg-white dark:bg-secondary-800\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-lg font-semibold text-secondary-900 dark:text-white flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(FiMessageCircle, {\n              className: \"w-5 h-5 mr-2 text-primary-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 15\n            }, this), \"AI Assistant\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-secondary-600 dark:text-secondary-400 truncate\",\n            children: [\"Chatting about: \", currentDocument.name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-2\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: clearChat,\n            className: \"p-2 rounded-lg hover:bg-secondary-100 dark:hover:bg-secondary-700 transition-colors\",\n            title: \"Clear chat history\",\n            children: /*#__PURE__*/_jsxDEV(FiTrash2, {\n              className: \"w-4 h-4 text-secondary-600 dark:text-secondary-400\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 overflow-y-auto p-4 space-y-4 bg-secondary-50 dark:bg-secondary-900\",\n      children: [chatMessages.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center py-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-12 h-12 bg-primary-100 dark:bg-primary-900/20 rounded-full flex items-center justify-center mx-auto mb-4\",\n          children: /*#__PURE__*/_jsxDEV(FiMessageCircle, {\n            className: \"w-6 h-6 text-primary-600 dark:text-primary-400\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-medium text-secondary-900 dark:text-white mb-2\",\n          children: \"Start a conversation\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-secondary-600 dark:text-secondary-400 text-sm mb-4\",\n          children: \"Ask me anything about your document. I can help with:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid gap-2 max-w-sm mx-auto\",\n          children: ['Summarize the main points', 'What are the key dates?', 'Explain specific clauses', 'Find important numbers'].map((suggestion, index) => /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setMessage(suggestion),\n            className: \"text-left p-3 bg-white dark:bg-secondary-800 rounded-lg border border-secondary-200 dark:border-secondary-700 hover:border-primary-300 dark:hover:border-primary-600 transition-colors text-sm\",\n            children: suggestion\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 11\n      }, this) : chatMessages.map(msg => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `flex ${msg.type === 'user' ? 'justify-end' : 'justify-start'}`,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `flex items-start space-x-3 max-w-[80%] ${msg.type === 'user' ? 'flex-row-reverse space-x-reverse' : ''}`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: `w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${msg.type === 'user' ? 'bg-primary-600' : msg.isError ? 'bg-red-100 dark:bg-red-900/20' : 'bg-secondary-200 dark:bg-secondary-700'}`,\n            children: msg.type === 'user' ? /*#__PURE__*/_jsxDEV(FiUser, {\n              className: \"w-4 h-4 text-white\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 21\n            }, this) : /*#__PURE__*/_jsxDEV(FiMessageCircle, {\n              className: `w-4 h-4 ${msg.isError ? 'text-red-600 dark:text-red-400' : 'text-secondary-600 dark:text-secondary-400'}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `group relative ${msg.type === 'user' ? 'bg-primary-600 text-white' : msg.isError ? 'bg-red-50 dark:bg-red-900/10 border border-red-200 dark:border-red-800' : 'bg-white dark:bg-secondary-800 border border-secondary-200 dark:border-secondary-700'} rounded-lg px-4 py-3 shadow-sm`,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: `text-sm leading-relaxed ${msg.type === 'user' ? 'text-white' : msg.isError ? 'text-red-900 dark:text-red-100' : 'text-secondary-900 dark:text-white'}`,\n              children: msg.content\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `flex items-center justify-between mt-2 text-xs ${msg.type === 'user' ? 'text-primary-100' : 'text-secondary-500 dark:text-secondary-400'}`,\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: formatTimestamp(msg.timestamp)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 266,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => copyMessage(msg.content),\n                className: `opacity-0 group-hover:opacity-100 transition-opacity p-1 rounded hover:bg-black/10 ${msg.type === 'user' ? 'text-white' : 'text-secondary-600 dark:text-secondary-400'}`,\n                title: \"Copy message\",\n                children: /*#__PURE__*/_jsxDEV(FiCopy, {\n                  className: \"w-3 h-3\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 275,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 268,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 15\n        }, this)\n      }, msg.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 13\n      }, this)), isTyping && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-start\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-start space-x-3 max-w-[80%]\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-8 h-8 rounded-full bg-secondary-200 dark:bg-secondary-700 flex items-center justify-center flex-shrink-0\",\n            children: /*#__PURE__*/_jsxDEV(FiMessageCircle, {\n              className: \"w-4 h-4 text-secondary-600 dark:text-secondary-400\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white dark:bg-secondary-800 border border-secondary-200 dark:border-secondary-700 rounded-lg px-4 py-3 shadow-sm\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex space-x-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-2 h-2 bg-secondary-400 rounded-full animate-bounce\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 294,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-2 h-2 bg-secondary-400 rounded-full animate-bounce\",\n                style: {\n                  animationDelay: '0.1s'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 295,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-2 h-2 bg-secondary-400 rounded-full animate-bounce\",\n                style: {\n                  animationDelay: '0.2s'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 296,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: messagesEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 border-t border-secondary-200 dark:border-secondary-700 bg-white dark:bg-secondary-800\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-end space-x-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1\",\n          children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n            ref: inputRef,\n            value: message,\n            onChange: e => setMessage(e.target.value),\n            onKeyPress: handleKeyPress,\n            placeholder: \"Ask me anything about this document...\",\n            className: \"w-full px-4 py-3 border border-secondary-300 dark:border-secondary-600 rounded-lg bg-white dark:bg-secondary-700 text-secondary-900 dark:text-white placeholder-secondary-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent resize-none\",\n            rows: 1,\n            style: {\n              minHeight: '44px',\n              maxHeight: '120px',\n              height: 'auto'\n            },\n            onInput: e => {\n              e.target.style.height = 'auto';\n              e.target.style.height = Math.min(e.target.scrollHeight, 120) + 'px';\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleSendMessage,\n          disabled: !message.trim() || isChatLoading,\n          className: \"btn-primary p-3 disabled:opacity-50 disabled:cursor-not-allowed\",\n          title: \"Send message (Enter)\",\n          children: isChatLoading ? /*#__PURE__*/_jsxDEV(FiRefreshCw, {\n            className: \"w-5 h-5 animate-spin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 337,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(FiSend, {\n            className: \"w-5 h-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between mt-2 text-xs text-secondary-500 dark:text-secondary-400\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Press Enter to send, Shift+Enter for new line\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [message.length, \"/1000\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 160,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatInterface, \"KQPOBNmbsTc0NeY2w8h247d1HDI=\", false, function () {\n  return [useApp];\n});\n_c = ChatInterface;\nexport default ChatInterface;\nvar _c;\n$RefreshReg$(_c, \"ChatInterface\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useApp","apiService","FiSend","FiTrash2","FiUser","FiMessageCircle","FiCopy","FiRefreshCw","jsxDEV","_jsxDEV","ChatInterface","isPanel","_s","state","actions","currentDocument","chatMessages","isChatLoading","message","setMessage","isTyping","setIsTyping","messagesEndRef","inputRef","_messagesEndRef$curre","current","scrollIntoView","behavior","loadChatHistory","setChatMessages","error","console","handleSendMessage","trim","userMessage","id","Date","now","type","content","timestamp","toISOString","addChatMessage","setChatLoading","Promise","resolve","setTimeout","aiResponse","generateMockResponse","errorMessage","isError","showError","responses","lowerMessage","toLowerCase","includes","summary","rent","default","handleKeyPress","event","key","shiftKey","preventDefault","copyMessage","navigator","clipboard","writeText","showSuccess","clearChat","showInfo","formatTimestamp","date","toLocaleTimeString","hour","minute","className","children","fileName","_jsxFileName","lineNumber","columnNumber","name","onClick","title","length","map","suggestion","index","msg","style","animationDelay","ref","value","onChange","e","target","onKeyPress","placeholder","rows","minHeight","maxHeight","height","onInput","Math","min","scrollHeight","disabled","_c","$RefreshReg$"],"sources":["D:/trae/ocrapillm/frontend/src/components/ChatInterface.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useApp } from '../context/AppContext';\nimport { apiService } from '../services/api';\nimport { FiSend, FiTrash2, FiUser, FiMessageCircle, FiCopy, FiRefreshCw } from 'react-icons/fi';\n\nconst ChatInterface = ({ isPanel = false }) => {\n  const { state, actions } = useApp();\n  const { currentDocument, chatMessages, isChatLoading } = state;\n  const [message, setMessage] = useState('');\n  const [isTyping, setIsTyping] = useState(false);\n  const messagesEndRef = useRef(null);\n  const inputRef = useRef(null);\n\n  // Auto-scroll to bottom when new messages arrive\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [chatMessages]);\n\n  // Load chat history when document changes\n  useEffect(() => {\n    if (currentDocument) {\n      loadChatHistory();\n    }\n  }, [currentDocument]);\n\n  const loadChatHistory = async () => {\n    if (!currentDocument) return;\n    \n    try {\n      // const history = await apiService.getChatHistory(currentDocument.id);\n      // actions.setChatMessages(history);\n      \n      // For demo purposes, set empty chat\n      actions.setChatMessages([]);\n    } catch (error) {\n      console.error('Failed to load chat history:', error);\n    }\n  };\n\n  const handleSendMessage = async () => {\n    if (!message.trim() || !currentDocument || isChatLoading) return;\n    \n    const userMessage = {\n      id: Date.now(),\n      type: 'user',\n      content: message.trim(),\n      timestamp: new Date().toISOString()\n    };\n    \n    // Add user message\n    actions.addChatMessage(userMessage);\n    setMessage('');\n    actions.setChatLoading(true);\n    setIsTyping(true);\n    \n    try {\n      // Simulate API call\n      await new Promise(resolve => setTimeout(resolve, 1500));\n      \n      // For demo purposes, create a mock response\n      const aiResponse = {\n        id: Date.now() + 1,\n        type: 'ai',\n        content: generateMockResponse(userMessage.content),\n        timestamp: new Date().toISOString()\n      };\n      \n      // In real implementation:\n      // const response = await apiService.chatWithDocument(\n      //   currentDocument.id,\n      //   message.trim(),\n      //   chatMessages\n      // );\n      \n      actions.addChatMessage(aiResponse);\n      \n    } catch (error) {\n      console.error('Chat error:', error);\n      const errorMessage = {\n        id: Date.now() + 1,\n        type: 'ai',\n        content: 'Sorry, I encountered an error while processing your question. Please try again.',\n        timestamp: new Date().toISOString(),\n        isError: true\n      };\n      actions.addChatMessage(errorMessage);\n      actions.showError('Failed to get AI response');\n    } finally {\n      actions.setChatLoading(false);\n      setIsTyping(false);\n    }\n  };\n\n  const generateMockResponse = (userMessage) => {\n    const responses = {\n      'summary': 'This document appears to be a lease agreement containing rental terms, property details, and legal clauses. The key information includes rental amount, lease duration, property address, and responsibilities of both tenant and landlord.',\n      'key points': 'The main points in this document include: 1) Monthly rent amount and payment terms, 2) Lease duration and renewal options, 3) Security deposit requirements, 4) Property maintenance responsibilities, 5) Termination clauses and notice periods.',\n      'rent': 'Based on the document, the monthly rent amount is specified in the lease terms section. The payment is typically due on the first of each month, with specific late fee policies outlined.',\n      'default': 'I can help you understand this document better. You can ask me about specific clauses, key terms, dates, amounts, or request a summary of the main points. What would you like to know?'\n    };\n    \n    const lowerMessage = userMessage.toLowerCase();\n    \n    if (lowerMessage.includes('summary') || lowerMessage.includes('summarize')) {\n      return responses.summary;\n    } else if (lowerMessage.includes('key') || lowerMessage.includes('main') || lowerMessage.includes('important')) {\n      return responses['key points'];\n    } else if (lowerMessage.includes('rent') || lowerMessage.includes('payment') || lowerMessage.includes('money')) {\n      return responses.rent;\n    } else {\n      return responses.default;\n    }\n  };\n\n  const handleKeyPress = (event) => {\n    if (event.key === 'Enter' && !event.shiftKey) {\n      event.preventDefault();\n      handleSendMessage();\n    }\n  };\n\n  const copyMessage = async (content) => {\n    try {\n      await navigator.clipboard.writeText(content);\n      actions.showSuccess('Message copied to clipboard');\n    } catch (error) {\n      actions.showError('Failed to copy message');\n    }\n  };\n\n  const clearChat = () => {\n    actions.clearChat();\n    actions.showInfo('Chat history cleared');\n  };\n\n  const formatTimestamp = (timestamp) => {\n    const date = new Date(timestamp);\n    return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\n  };\n\n  if (!currentDocument) {\n    return (\n      <div className=\"h-full flex items-center justify-center p-8\">\n        <div className=\"text-center\">\n          <div className=\"w-16 h-16 bg-secondary-100 dark:bg-secondary-700 rounded-full flex items-center justify-center mx-auto mb-4\">\n            <FiMessageCircle className=\"w-8 h-8 text-secondary-400\" />\n          </div>\n          <h3 className=\"text-lg font-semibold text-secondary-900 dark:text-white mb-2\">\n            AI Assistant Ready\n          </h3>\n          <p className=\"text-secondary-600 dark:text-secondary-400 text-sm\">\n            Upload and process a document to start chatting with our AI assistant.\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`h-full flex flex-col ${isPanel ? 'border-l border-secondary-200 dark:border-secondary-700' : ''}`}>\n      {/* Header */}\n      <div className=\"p-4 border-b border-secondary-200 dark:border-secondary-700 bg-white dark:bg-secondary-800\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h2 className=\"text-lg font-semibold text-secondary-900 dark:text-white flex items-center\">\n              <FiMessageCircle className=\"w-5 h-5 mr-2 text-primary-600\" />\n              AI Assistant\n            </h2>\n            <p className=\"text-sm text-secondary-600 dark:text-secondary-400 truncate\">\n              Chatting about: {currentDocument.name}\n            </p>\n          </div>\n          \n          <div className=\"flex items-center space-x-2\">\n            <button\n              onClick={clearChat}\n              className=\"p-2 rounded-lg hover:bg-secondary-100 dark:hover:bg-secondary-700 transition-colors\"\n              title=\"Clear chat history\"\n            >\n              <FiTrash2 className=\"w-4 h-4 text-secondary-600 dark:text-secondary-400\" />\n            </button>\n          </div>\n        </div>\n      </div>\n      \n      {/* Messages */}\n      <div className=\"flex-1 overflow-y-auto p-4 space-y-4 bg-secondary-50 dark:bg-secondary-900\">\n        {chatMessages.length === 0 ? (\n          <div className=\"text-center py-8\">\n            <div className=\"w-12 h-12 bg-primary-100 dark:bg-primary-900/20 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <FiMessageCircle className=\"w-6 h-6 text-primary-600 dark:text-primary-400\" />\n            </div>\n            <h3 className=\"text-lg font-medium text-secondary-900 dark:text-white mb-2\">\n              Start a conversation\n            </h3>\n            <p className=\"text-secondary-600 dark:text-secondary-400 text-sm mb-4\">\n              Ask me anything about your document. I can help with:\n            </p>\n            \n            <div className=\"grid gap-2 max-w-sm mx-auto\">\n              {[\n                'Summarize the main points',\n                'What are the key dates?',\n                'Explain specific clauses',\n                'Find important numbers'\n              ].map((suggestion, index) => (\n                <button\n                  key={index}\n                  onClick={() => setMessage(suggestion)}\n                  className=\"text-left p-3 bg-white dark:bg-secondary-800 rounded-lg border border-secondary-200 dark:border-secondary-700 hover:border-primary-300 dark:hover:border-primary-600 transition-colors text-sm\"\n                >\n                  {suggestion}\n                </button>\n              ))}\n            </div>\n          </div>\n        ) : (\n          chatMessages.map((msg) => (\n            <div\n              key={msg.id}\n              className={`flex ${msg.type === 'user' ? 'justify-end' : 'justify-start'}`}\n            >\n              <div className={`flex items-start space-x-3 max-w-[80%] ${msg.type === 'user' ? 'flex-row-reverse space-x-reverse' : ''}`}>\n                {/* Avatar */}\n                <div className={`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${\n                  msg.type === 'user'\n                    ? 'bg-primary-600'\n                    : msg.isError\n                    ? 'bg-red-100 dark:bg-red-900/20'\n                    : 'bg-secondary-200 dark:bg-secondary-700'\n                }`}>\n                  {msg.type === 'user' ? (\n                    <FiUser className=\"w-4 h-4 text-white\" />\n                  ) : (\n                    <FiMessageCircle className={`w-4 h-4 ${\n                      msg.isError\n                        ? 'text-red-600 dark:text-red-400'\n                        : 'text-secondary-600 dark:text-secondary-400'\n                    }`} />\n                  )}\n                </div>\n                \n                {/* Message */}\n                <div className={`group relative ${\n                  msg.type === 'user'\n                    ? 'bg-primary-600 text-white'\n                    : msg.isError\n                    ? 'bg-red-50 dark:bg-red-900/10 border border-red-200 dark:border-red-800'\n                    : 'bg-white dark:bg-secondary-800 border border-secondary-200 dark:border-secondary-700'\n                } rounded-lg px-4 py-3 shadow-sm`}>\n                  <div className={`text-sm leading-relaxed ${\n                    msg.type === 'user'\n                      ? 'text-white'\n                      : msg.isError\n                      ? 'text-red-900 dark:text-red-100'\n                      : 'text-secondary-900 dark:text-white'\n                  }`}>\n                    {msg.content}\n                  </div>\n                  \n                  <div className={`flex items-center justify-between mt-2 text-xs ${\n                    msg.type === 'user'\n                      ? 'text-primary-100'\n                      : 'text-secondary-500 dark:text-secondary-400'\n                  }`}>\n                    <span>{formatTimestamp(msg.timestamp)}</span>\n                    \n                    <button\n                      onClick={() => copyMessage(msg.content)}\n                      className={`opacity-0 group-hover:opacity-100 transition-opacity p-1 rounded hover:bg-black/10 ${\n                        msg.type === 'user' ? 'text-white' : 'text-secondary-600 dark:text-secondary-400'\n                      }`}\n                      title=\"Copy message\"\n                    >\n                      <FiCopy className=\"w-3 h-3\" />\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          ))\n        )}\n        \n        {/* Typing Indicator */}\n        {isTyping && (\n          <div className=\"flex justify-start\">\n            <div className=\"flex items-start space-x-3 max-w-[80%]\">\n              <div className=\"w-8 h-8 rounded-full bg-secondary-200 dark:bg-secondary-700 flex items-center justify-center flex-shrink-0\">\n                <FiMessageCircle className=\"w-4 h-4 text-secondary-600 dark:text-secondary-400\" />\n              </div>\n              \n              <div className=\"bg-white dark:bg-secondary-800 border border-secondary-200 dark:border-secondary-700 rounded-lg px-4 py-3 shadow-sm\">\n                <div className=\"flex space-x-1\">\n                  <div className=\"w-2 h-2 bg-secondary-400 rounded-full animate-bounce\"></div>\n                  <div className=\"w-2 h-2 bg-secondary-400 rounded-full animate-bounce\" style={{ animationDelay: '0.1s' }}></div>\n                  <div className=\"w-2 h-2 bg-secondary-400 rounded-full animate-bounce\" style={{ animationDelay: '0.2s' }}></div>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n        \n        <div ref={messagesEndRef} />\n      </div>\n      \n      {/* Input */}\n      <div className=\"p-4 border-t border-secondary-200 dark:border-secondary-700 bg-white dark:bg-secondary-800\">\n        <div className=\"flex items-end space-x-3\">\n          <div className=\"flex-1\">\n            <textarea\n              ref={inputRef}\n              value={message}\n              onChange={(e) => setMessage(e.target.value)}\n              onKeyPress={handleKeyPress}\n              placeholder=\"Ask me anything about this document...\"\n              className=\"w-full px-4 py-3 border border-secondary-300 dark:border-secondary-600 rounded-lg bg-white dark:bg-secondary-700 text-secondary-900 dark:text-white placeholder-secondary-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent resize-none\"\n              rows={1}\n              style={{\n                minHeight: '44px',\n                maxHeight: '120px',\n                height: 'auto'\n              }}\n              onInput={(e) => {\n                e.target.style.height = 'auto';\n                e.target.style.height = Math.min(e.target.scrollHeight, 120) + 'px';\n              }}\n            />\n          </div>\n          \n          <button\n            onClick={handleSendMessage}\n            disabled={!message.trim() || isChatLoading}\n            className=\"btn-primary p-3 disabled:opacity-50 disabled:cursor-not-allowed\"\n            title=\"Send message (Enter)\"\n          >\n            {isChatLoading ? (\n              <FiRefreshCw className=\"w-5 h-5 animate-spin\" />\n            ) : (\n              <FiSend className=\"w-5 h-5\" />\n            )}\n          </button>\n        </div>\n        \n        <div className=\"flex items-center justify-between mt-2 text-xs text-secondary-500 dark:text-secondary-400\">\n          <span>Press Enter to send, Shift+Enter for new line</span>\n          <span>{message.length}/1000</span>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ChatInterface;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}